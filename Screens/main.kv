#:import MDToolbar kivymd.toolbar.MDToolbar
#:import MDBottomNavigation kivymd.tabs.MDBottomNavigation
#:import SmartTileWithLabel kivymd.imagelists.SmartTileWithLabel
#:import SmartTileWithStar kivymd.imagelists.SmartTileWithStar
#:import get_hex_from_color kivy.utils.get_hex_from_color
#:import ThemeManager kivymd.theming.ThemeManager
#:import MDTextField kivymd.textfields.MDTextField


<MySmartTileWithLabel@SmartTileWithLabel>:
    mipmap: True
    font_style: 'Subhead'


BoxLayout:
    id: mango_paint


    BoxLayout:
        id: boxlayout_body
        orientation: 'vertical'

        MDToolbar:
            id: toolbar
            title: app.title
            md_bg_color: app.theme_cls.primary_color
            background_palette: 'Primary'
            background_hue: '700'
            height: app.theme_cls.standard_increment - dp(15)
            elevation: 10
            left_action_items: [['arrow-left', lambda x: None]]
            right_action_items:
                [['dots-vertical', lambda x: None]]



        ScreenManager:
            id: manager

            Screen:
                name: 'btn1'

                MDRaisedButton:
                    pos_hint: {'center_x': .5, 'center_y': .55}
                    on_release: manager.current = 'thumbnail'
                    text: 'Open Grid'

            Screen:

                name: 'thumbnail'

                on_enter:
                    app.crop_image_for_tile(tile_1, tile_1.size, 'Screens/resources/imgs/mango.jpg')
                    app.crop_image_for_tile(tile_2, tile_2.size, 'Screens/resources/imgs/mango.jpg')
                    app.crop_image_for_tile(tile_3, tile_3.size, 'Screens/resources/imgs/mango.jpg')
                    app.crop_image_for_tile(tile_4, tile_4.size, 'Screens/resources/imgs/mango.jpg')
                    app.crop_image_for_tile(tile_5, tile_5.size, 'Screens/resources/imgs/mango.jpg')
                    app.crop_image_for_tile(tile_6, tile_6.size, 'Screens/resources/imgs/mango.jpg')
                    app.crop_image_for_tile(tile_7, tile_7.size, 'Screens/resources/imgs/mango.jpg')

                ScrollView:
                    do_scroll_x: False

                    GridLayout:
                        cols: 3
                        row_default_height:
                            (self.width - self.cols*self.spacing[0])/self.cols
                        row_force_default: True
                        size_hint_y: None
                        height: self.minimum_height
                        padding: dp(4), dp(4)
                        spacing: dp(4)

                        SmartTileWithStar:
                            id: tile_2
                            mipmap: True
                            stars: 3
                        SmartTileWithStar:
                            id: tile_3
                            mipmap: True
                            stars: 3
                        SmartTileWithLabel:
                            id: tile_1
                            text:
                                "Beautiful\\n[size=12]beautiful-931152_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_4
                            text:
                                "Robin\\n[size=12]robin-944887_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_5
                            text:
                                "Kitten\\n[size=12]kitten-1049129_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_6
                            text:
                                "Light-Bulb\\n[size=12]light-bulb-1042480_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_7
                            text:
                                "Tangerines\\n[size=12]tangerines-1111529_1280.jpg[/size]"


        MDBottomNavigation:

            MDBottomNavigationItem:
                name: 'gallery'
                text: "gallery"
                icon: "home"
                on_tab_press:
                    app.show_gallery()

            MDBottomNavigationItem:
                name: 'mystudio'
                text: "MyStudio"
                icon: "image-filter-frames"
                on_tab_press:
                    app.show_mystudio()
                        
            MDBottomNavigationItem:
                name: 'purchase'
                text: "Purchase"
                icon: "basket"
                on_tab_press:
                    app.show_purchase()