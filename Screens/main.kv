#:import MDToolbar kivymd.toolbar.MDToolbar
#:import MDBottomNavigation kivymd.tabs.MDBottomNavigation
#:import SmartTileWithLabel kivymd.imagelists.SmartTileWithLabel
#:import SmartTileWithStar kivymd.imagelists.SmartTileWithStar
#:import get_hex_from_color kivy.utils.get_hex_from_color
#:import ThemeManager kivymd.theming.ThemeManager
#:import MDTextField kivymd.textfields.MDTextField

BoxLayout:
    id: mango_paint


    BoxLayout:
        id: boxlayout_body
        orientation: 'vertical'

        MDToolbar:
            id: toolbar
            title: app.title
            md_bg_color: app.theme_cls.primary_color
            background_palette: 'Primary'
            background_hue: '500'
            elevation: 10
            left_action_items:
                [['menu', lambda x: app.root.toggle_nav_drawer()]]
            right_action_items:
                [['dots-vertical', lambda x: app.root.toggle_nav_drawer()]]
            on_touch_down: root.events_callback('choice_one')



        ScreenManager:
            id: manager

            Screen:
                name: 'thumbnail'
                on_enter:
                    self.crop_image_for_tile(tile_1, tile_1.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')
                    self.crop_image_for_tile(tile_2, tile_2.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')
                    self.crop_image_for_tile(tile_3, tile_3.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')
                    self.crop_image_for_tile(tile_4, tile_4.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')
                    self.crop_image_for_tile(tile_5, tile_5.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')
                    self.crop_image_for_tile(tile_6, tile_6.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')
                    self.crop_image_for_tile(tile_7, tile_7.size, \
                    '/Users/jarvis/codes/mangoPaint/mangoPaint/Screens/resources/imgs/mango.jpg')

                ScrollView:
                    do_scroll_x: False

                    GridLayout:
                        cols: 3
                        row_default_height:
                            (self.width - self.cols*self.spacing[0])/self.cols
                        row_force_default: True
                        size_hint_y: None
                        height: self.minimum_height
                        padding: dp(4), dp(4)
                        spacing: dp(4)

                        SmartTileWithStar:
                            id: tile_2
                            mipmap: True
                            stars: 3
                        SmartTileWithStar:
                            id: tile_3
                            mipmap: True
                            stars: 3
                        SmartTileWithLabel:
                            id: tile_1
                            text:
                                "Beautiful\\n[size=12]beautiful-931152_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_4
                            text:
                                "Robin\\n[size=12]robin-944887_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_5
                            text:
                                "Kitten\\n[size=12]kitten-1049129_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_6
                            text:
                                "Light-Bulb\\n[size=12]light-bulb-1042480_1280.jpg[/size]"
                        SmartTileWithLabel:
                            id: tile_7
                            text:
                                "Tangerines\\n[size=12]tangerines-1111529_1280.jpg[/size]"

        MDBottomNavigation:

            MDBottomNavigationItem:
                name: 'gallery'
                text: "gallery"
                icon: "home"
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    padding: dp(48)
                    spacing: dp(10)
                    MDTextField:
                        hint_text: "You can put any widgets here"
                        helper_text: "Hello :)"
                        helper_text_mode: "on_focus"                


            MDBottomNavigationItem:
                name: 'mystudio'
                text: "MyStudio"
                icon: "home"
                MDLabel:
                    font_style: 'Body1'
                    theme_text_color: 'Primary'
                    text: "camera"
                    halign: 'center'
                    # on_release: root.events_callback('show_mystudio')
                    on_release:
                        # app.set_menu_for_demo_apps()
                        # app.instance_menu_demo_apps = MDDropdownMenu(items=app.menu_for_demo_apps, max_height=dp(260), width_mult=4)
                        # app.instance_menu_demo_apps.open(self)                    

            MDBottomNavigationItem:
                name: 'purchase'
                text: "Purchase"
                icon: "basket"
                MDLabel:
                    font_style: 'Body1'
                    theme_text_color: 'Primary'
                    text: "Purchase"
                    halign: 'center'
                    on_touch_down: root.events_callback('show_purchase')